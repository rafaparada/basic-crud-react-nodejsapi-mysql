(this["webpackJsonpbasic-crud-react-nodejs-mysql"]=this["webpackJsonpbasic-crud-react-nodejs-mysql"]||[]).push([[0],{177:function(e,t,n){"use strict";n.r(t);var r=n(64),c=n.n(r),a=n(3),s=n(8),o=(n(76),n(1)),i=function(e){var t=e.mensajeReq;return Object(o.jsxs)("div",{className:"alert alert-success alert-dismissible fixed-top center-block text-center myAlert",children:[Object(o.jsx)("i",{className:"fas fa-check-circle"})," ",Object(o.jsx)("span",{style:{fontSize:"18px"},children:t})]})},l=n(29),j=n(4),u=n.n(j),b=n(14),d=n(0),m=function(){var e=Object(b.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://rafpapp.herokuapp.com/frutas");case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,r=n.frutas,e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e="https://rafpapp.herokuapp.com",t=Object(d.useState)(!1),n=Object(a.a)(t,2),r=n[0],c=n[1],s=Object(d.useState)([]),o=Object(a.a)(s,2),i=o[0],j=o[1],p=Object(d.useState)(""),O=Object(a.a)(p,2),h=O[0],x=O[1],f=Object(d.useState)(!1),v=Object(a.a)(f,2),N=v[0],y=v[1],F=Object(d.useState)(0),g=Object(a.a)(F,2),S=g[0],w=g[1],k=Object(d.useState)(!1),R=Object(a.a)(k,2),A=R[0],C=R[1],E=Object(d.useState)(0),T=Object(a.a)(E,2),I=T[0],V=T[1],q=function(){c(!0),setTimeout((function(){c(!1)}),1500)};Object(d.useEffect)((function(){C(!0),m().then((function(e){j(e)})),C(!1)}),[I]);return[function(){var t=Object(b.a)(u.a.mark((function t(n){var r,c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},C(!0),t.next=4,fetch(e+"/crear",r);case 4:return c=t.sent,t.next=7,c.json();case 7:a=t.sent,q(),x(a.mensaje),C(!1),V(Date.now());case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r,i,function(){var t=Object(b.a)(u.a.mark((function t(n){var r,c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={method:"DELETE"},C(!0),t.next=5,fetch(e+"/delete/"+n,r);case 5:return c=t.sent,t.next=8,c.json();case 8:a=t.sent,q(),x(a.mensaje),C(!1),V(Date.now()),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),h,function(e,t,n){var r=Object(l.a)({},t);delete r.id,y(!0),w(e),n(r)},N,function(){var t=Object(b.a)(u.a.mark((function t(n){var r,c,a,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(l.a)(Object(l.a)({},n),{},{id:S}),c={method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(r)},C(!0),t.next=5,fetch(e+"/update",c);case 5:return a=t.sent,t.next=8,a.json();case 8:s=t.sent,x(s.mensaje),y(!1),w(0),q(),C(!1),V(Date.now());case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A,function(e){y(!1),e()}]},O=function(e){var t=e.fruit,n=e.deleteFruit,r=e.editFruit,c=e.setValues,a=t.id,s=t.nombre,i=t.color,l=t.precio;return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:s}),Object(o.jsx)("td",{children:i}),Object(o.jsx)("td",{children:l}),Object(o.jsxs)("td",{className:"text-center",children:[Object(o.jsx)("button",{type:"button",onClick:function(){return n(a)},className:"btn btn-danger btn-sm",children:Object(o.jsx)("i",{className:"fas fa-trash"})}),Object(o.jsx)("button",{type:"button",onClick:function(){return r(a,t,c)},className:"btn btn-danger btn-sm ms-1",children:Object(o.jsx)("i",{className:"fas fa-edit"})})]})]})},h=function(e){var t=e.fetchFrutas,n=e.deleteFruit,r=e.editFruit,c=e.setValues;return Object(o.jsxs)("table",{className:"table table-dark table-striped",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"FRUTA"}),Object(o.jsx)("th",{children:"COLOR"}),Object(o.jsx)("th",{children:"PRECIO"}),Object(o.jsx)("th",{children:"ACCIONES"})]})}),Object(o.jsx)("tbody",{children:t.map((function(e){return Object(o.jsx)(O,{fruit:e,deleteFruit:n,editFruit:r,setValues:c},e.id)}))})]})},x=function(){return Object(o.jsx)("div",{className:"d-flex text-center align-items-center myLoading",children:Object(o.jsx)("div",{className:"spinner-border text-primary tamano",role:"status",children:Object(o.jsx)("span",{className:"visually-hidden"})})})},f={nombre:"",color:"",precio:""},v=n(19),N=v.b().shape({nombre:v.c().max(15,"EL nombre no debe pasar de 15 caracteres").required("Ingrese el nombre de la fruta papu"),color:v.c().required("Seleccione el color papu"),precio:v.a().typeError("El precio debe ser num\xe9rico").positive("El precio debe ser positivo").required("Ingrese el Precio")}),y=function(){var e=p(),t=Object(a.a)(e,10),n=t[0],r=t[1],c=t[2],l=t[3],j=t[4],u=t[5],b=t[6],d=t[7],m=t[8],O=t[9];return Object(o.jsxs)("div",{className:"container mt-5",children:[m&&Object(o.jsx)(x,{}),r?Object(o.jsx)(i,{mensajeReq:j}):"",Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-3"}),Object(o.jsxs)("div",{className:"col-6 mt-3",children:[Object(o.jsx)("h5",{children:b?"MODIFICAR FRUTA":" REGISTRAR FRUTA"}),Object(o.jsx)("hr",{}),Object(o.jsx)(s.d,{initialValues:f,validationSchema:N,onSubmit:function(e,t){var r=t.resetForm;b?d(e):n(e),r()},children:function(e){e.touched,e.errors,e.isSubmitting;var t=e.setValues,n=e.resetForm;return Object(o.jsxs)(s.c,{children:[Object(o.jsx)("label",{htmlFor:"nombre",children:"Fruta:"}),Object(o.jsx)(s.b,{id:"nombre",name:"nombre",className:"form-control"}),Object(o.jsx)(s.a,{name:"nombre",component:"div",className:"alert alert-warning"}),Object(o.jsx)("label",{htmlFor:"color",children:"Color:"}),Object(o.jsxs)(s.b,{id:"color",name:"color",as:"select",className:"form-select",children:[Object(o.jsx)("option",{value:"",children:"Seleccione"}),Object(o.jsx)("option",{value:"Rojo",children:"Rojo"}),Object(o.jsx)("option",{value:"Amarillo",children:"Amarillo"}),Object(o.jsx)("option",{value:"Blanco",children:"Blanco"}),Object(o.jsx)("option",{value:"Azul",children:"Azul"}),Object(o.jsx)("option",{value:"Verde",children:"Verde"}),Object(o.jsx)("option",{value:"Negro",children:"Negro"}),Object(o.jsx)("option",{value:"Anaranjado",children:"Anaranjado"})]}),Object(o.jsx)(s.a,{name:"color",component:"div",className:"alert alert-warning"}),Object(o.jsx)("label",{htmlFor:"precio",children:"Precio:"}),Object(o.jsx)(s.b,{id:"precio",name:"precio",className:"form-control"}),Object(o.jsx)(s.a,{name:"precio",component:"div",className:"alert alert-warning"}),Object(o.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",children:b?"Guardar cambios":"Registrar"}),b&&Object(o.jsx)("button",{type:"button",className:"btn btn-danger mt-2",onClick:function(){return O(n)},children:"Cancelar"}),Object(o.jsx)("hr",{}),Object(o.jsx)(h,{fetchFrutas:c,deleteFruit:l,editFruit:u,setValues:t})]})}})]}),Object(o.jsx)("div",{className:"col-3"})]})]})};c.a.render(Object(o.jsx)(y,{}),document.getElementById("root"))},76:function(e,t,n){}},[[177,1,2]]]);
//# sourceMappingURL=main.ec297b05.chunk.js.map